{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/mann/CodeCompass_DEMO_FALL2025/codecompass/src/utils/github/app.ts"],"sourcesContent":["// src/lib/github/app.ts\nimport { App } from \"@octokit/app\";\nimport fs from \"fs\";\n\n// Initialize GitHub App\nconst privateKey = process.env.GITHUB_APP_PRIVATE_KEY_PATH\n  ? fs.readFileSync(process.env.GITHUB_APP_PRIVATE_KEY_PATH, \"utf8\")\n  : process.env.GITHUB_APP_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\") || \"\";\n\nexport const githubApp = new App({\n  appId: process.env.NEXT_PUBLIC_GITHUB_APP_CLIENT_ID!,\n  privateKey,\n  oauth: {\n    clientId: process.env.GITHUB_APP_CLIENT_ID!,\n    clientSecret: process.env.GITHUB_APP_CLIENT_SECRET!,\n  },\n});\n\n/**\n * Generate an installation access token (valid for 1 hour)\n */\nexport async function getInstallationToken(\n  installationId: number,\n): Promise<string> {\n  const octokit = await githubApp.getInstallationOctokit(installationId);\n\n  const { data } = await octokit.request(\n    \"POST /app/installations/{installation_id}/access_tokens\",\n    {\n      installation_id: installationId,\n    },\n  );\n\n  return data.token;\n}\n\n/**\n * Get installation for a specific user/org\n */\nexport async function getInstallationByAccount(accountLogin: string) {\n  try {\n    const octokit = await githubApp.octokit;\n    const { data: installation } = await octokit.request(\n      \"GET /users/{username}/installation\",\n      {\n        username: accountLogin,\n      },\n    );\n    return installation;\n  } catch (error) {\n    return null;\n  }\n}\n\n/**\n * Check if a repo is accessible by an installation\n */\nexport async function checkRepoAccess(\n  installationId: number,\n  owner: string,\n  repo: string,\n): Promise<boolean> {\n  try {\n    const octokit = await githubApp.getInstallationOctokit(installationId);\n    await octokit.request(\"GET /repos/{owner}/{repo}\", {\n      owner,\n      repo,\n    });\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;;;;;;AACxB;AACA;;;AAEA,wBAAwB;AACxB,MAAM,aAAa,QAAQ,GAAG,CAAC,2BAA2B,GACtD,wGAAE,CAAC,YAAY,CAAC,QAAQ,GAAG,CAAC,2BAA2B,EAAE,UACzD,QAAQ,GAAG,CAAC,sBAAsB,EAAE,QAAQ,QAAQ,SAAS;AAE1D,MAAM,YAAY,IAAI,gKAAG,CAAC;IAC/B,KAAK;IACL;IACA,OAAO;QACL,UAAU,QAAQ,GAAG,CAAC,oBAAoB;QAC1C,cAAc,QAAQ,GAAG,CAAC,wBAAwB;IACpD;AACF;AAKO,eAAe,qBACpB,cAAsB;IAEtB,MAAM,UAAU,MAAM,UAAU,sBAAsB,CAAC;IAEvD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,OAAO,CACpC,2DACA;QACE,iBAAiB;IACnB;IAGF,OAAO,KAAK,KAAK;AACnB;AAKO,eAAe,yBAAyB,YAAoB;IACjE,IAAI;QACF,MAAM,UAAU,MAAM,UAAU,OAAO;QACvC,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,QAAQ,OAAO,CAClD,sCACA;YACE,UAAU;QACZ;QAEF,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAKO,eAAe,gBACpB,cAAsB,EACtB,KAAa,EACb,IAAY;IAEZ,IAAI;QACF,MAAM,UAAU,MAAM,UAAU,sBAAsB,CAAC;QACvD,MAAM,QAAQ,OAAO,CAAC,6BAA6B;YACjD;YACA;QACF;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///home/mann/CodeCompass_DEMO_FALL2025/codecompass/src/lib/services/gitProviderService.ts"],"sourcesContent":["\"use server\";\n\nimport { githubApp } from \"@/utils/github/app\";\nimport { createClient } from \"@/utils/supabase/server\";\nimport { ActionResult } from \"@/app/types/action\";\nimport { Repo } from \"@/app/types/supabase\";\nimport type { GitLabProject } from \"@/app/types/gitlab\";\n\nexport async function verifyGithubRepoAccess(\n  installation_id: string,\n  owner: string,\n  repo: string,\n): Promise<boolean> {\n  try {\n    //convert installation_id to number\n    const installationId = parseInt(installation_id, 10);\n    const octokit = await githubApp.getInstallationOctokit(installationId);\n\n    await octokit.request(\"GET /repos/{owner}/{repo}\", {\n      owner,\n      repo,\n    });\n\n    return true;\n  } catch (error) {\n    if (error instanceof Error && \"status\" in error && error.status === 404) {\n      return false;\n    }\n    throw error;\n  }\n}\n\nexport async function verifyGitLabRepoAccess(\n  access_token: string,\n  owner: string,\n  name: string,\n): Promise<boolean> {\n  try {\n    const response = await fetch(\n      `https://gitlab.com/api/v4/projects/${owner}/${name}`,\n      {\n        headers: {\n          Authorization: `Bearer ${access_token}`,\n        },\n      },\n    );\n\n    return response.ok;\n  } catch (error) {\n    if (error instanceof Error && \"status\" in error && error.status === 404) {\n      return false;\n    }\n    throw error;\n  }\n}\n\nexport async function fetchGitLabProjects(\n  access_token: string,\n): Promise<GitLabProject[]> {\n  try {\n    // Fetch user's projects with membership (owned and member)\n    const response = await fetch(\n      \"https://gitlab.com/api/v4/projects?membership=true&per_page=100&simple=true&order_by=last_activity_at&sort=desc\",\n      {\n        headers: {\n          Authorization: `Bearer ${access_token}`,\n        },\n      },\n    );\n\n    if (!response.ok) {\n      throw new Error(`GitLab API error: ${response.statusText}`);\n    }\n\n    const projects = await response.json();\n    return projects as GitLabProject[];\n  } catch (error) {\n    console.error(\"Failed to fetch GitLab projects:\", error);\n    throw error;\n  }\n}\n\nexport async function importGitLabProjects(\n  projects: GitLabProject[],\n  orgId: string,\n): Promise<ActionResult<Repo[]>> {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not found\" };\n  }\n\n  const { data: installation, error: installationError } = await supabase\n    .from(\"gitlab_installations\")\n    .select(\"*\")\n    .eq(\"installed_by\", user.id)\n    .single();\n\n  if (installationError || !installation) {\n    console.error(\"Failed to fetch GitLab installation:\", installationError);\n    return { success: false, error: \"GitLab installation not found\" };\n  }\n\n  const importedRepos: Repo[] = [];\n  const errors: string[] = [];\n\n  for (const project of projects) {\n    try {\n      // Verify access to the project by fetching it from GitLab API\n      const verifyResponse = await fetch(\n        `https://gitlab.com/api/v4/projects/${project.id}`,\n        {\n          headers: {\n            Authorization: `Bearer ${installation.access_token}`,\n          },\n        },\n      );\n\n      if (!verifyResponse.ok) {\n        errors.push(\n          `Failed to verify access to ${project.path_with_namespace}`,\n        );\n        continue;\n      }\n\n      // Check if repository already exists\n      const { data: existingRepo } = await supabase\n        .from(\"repositories\")\n        .select(\"*\")\n        .eq(\"organization_id\", orgId)\n        .eq(\"repo_url\", project.web_url)\n        .single();\n\n      if (existingRepo) {\n        console.log(\n          `Repository ${project.path_with_namespace} already exists, skipping`,\n        );\n        continue;\n      }\n\n      // Insert repository into database\n      const { data: repo, error: insertError } = await supabase\n        .from(\"repositories\")\n        .insert({\n          name: project.name,\n          provider: \"gitlab\",\n          repo_url: project.web_url,\n          organization_id: orgId,\n          indexed_by: user.id,\n          index_status: \"not indexed\",\n        })\n        .select()\n        .single();\n\n      if (insertError) {\n        console.error(\n          `Failed to insert ${project.path_with_namespace}:`,\n          insertError,\n        );\n        errors.push(`Failed to import ${project.path_with_namespace}`);\n        continue;\n      }\n\n      importedRepos.push(repo as Repo);\n    } catch (error) {\n      console.error(`Error processing ${project.path_with_namespace}:`, error);\n      errors.push(\n        `Error processing ${project.path_with_namespace}: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n      );\n    }\n  }\n\n  // Return success even if no new repos were imported (they might all be duplicates)\n  // Only include error information if there were actual failures\n  if (errors.length > 0) {\n    console.warn(\"Some repositories failed to import:\", errors.join(\", \"));\n  }\n\n  return { success: true, data: importedRepos };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///home/mann/CodeCompass_DEMO_FALL2025/codecompass/src/lib/services/repoService.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient } from \"@/utils/supabase/server\";\nimport {\n  Repo,\n  Documentation,\n  DocPage,\n  Conversation,\n  ConversationMessage,\n  CodeSnippet,\n} from \"@/app/types/supabase\";\nimport { ActionResult } from \"@/app/types/action\";\nimport {\n  verifyGithubRepoAccess,\n  verifyGitLabRepoAccess,\n} from \"./gitProviderService\";\n\n// Helper function to parse GitHub URLs\nfunction parseGitHubUrl(url: string): { owner: string; repo: string } {\n  try {\n    // Handle multiple formats:\n    // - https://github.com/owner/repo\n    // - https://github.com/owner/repo.git\n    // - git@github.com:owner/repo.git\n\n    url = url.trim().replace(/\\.git$/, \"\");\n\n    if (url.includes(\"github.com/\")) {\n      const parts = url.split(\"github.com/\")[1].split(\"/\");\n      return { owner: parts[0], repo: parts[1] };\n    }\n\n    if (url.startsWith(\"git@github.com:\")) {\n      const parts = url.replace(\"git@github.com:\", \"\").split(\"/\");\n      return { owner: parts[0], repo: parts[1] };\n    }\n\n    return { owner: \"\", repo: \"\" };\n  } catch (error) {\n    return { owner: \"\", repo: \"\" };\n  }\n}\n\n// Helper function to parse GitLab URLs\nfunction parseGitLabUrl(url: string): { owner: string; repo: string } {\n  try {\n    // Handle multiple formats:\n    // - https://gitlab.com/owner/repo\n    // - https://gitlab.com/owner/subgroup/repo\n    // - https://gitlab.com/owner/repo.git\n    // - git@gitlab.com:owner/repo.git\n    // - Self-hosted: https://gitlab.example.com/owner/repo\n\n    url = url.trim().replace(/\\.git$/, \"\");\n\n    // Handle HTTPS URLs (gitlab.com or self-hosted)\n    if (url.includes(\"gitlab.com/\") || /gitlab\\.[^/]+\\//.test(url)) {\n      // Extract the path after the domain\n      const match = url.match(/gitlab[^/]*\\/(.+)/);\n      if (match) {\n        const pathParts = match[1].split(\"/\");\n        // GitLab supports nested groups, so we need to handle:\n        // - owner/repo (2 parts)\n        // - owner/subgroup/repo (3+ parts)\n        if (pathParts.length >= 2) {\n          // Take everything except the last part as owner/group\n          const repo = pathParts[pathParts.length - 1];\n          const owner = pathParts.slice(0, -1).join(\"/\");\n          return { owner, repo };\n        }\n      }\n    }\n\n    // Handle SSH URLs\n    if (url.startsWith(\"git@gitlab.com:\") || /git@gitlab\\.[^:]+:/.test(url)) {\n      const match = url.match(/git@gitlab[^:]*:(.+)/);\n      if (match) {\n        const pathParts = match[1].split(\"/\");\n        if (pathParts.length >= 2) {\n          const repo = pathParts[pathParts.length - 1];\n          const owner = pathParts.slice(0, -1).join(\"/\");\n          return { owner, repo };\n        }\n      }\n    }\n\n    return { owner: \"\", repo: \"\" };\n  } catch (error) {\n    return { owner: \"\", repo: \"\" };\n  }\n}\n\nexport async function getReposByOrganizationId(\n  organizationId: string,\n): Promise<ActionResult<Repo[]>> {\n  const client = await createClient();\n\n  const user = client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data, error } = await client\n    .from(\"repositories\")\n    .select(\"*\")\n    .eq(\"organization_id\", organizationId);\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (data ?? []) as Repo[] };\n}\n\nexport async function createRepoViaGithub(\n  formData: FormData,\n  orgId: string,\n): Promise<ActionResult<Repo | undefined>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const name = formData.get(\"name\") as string;\n  const provider = formData.get(\"type\") as string;\n  const url = formData.get(\"github-url\") as string;\n\n  if (!name) {\n    return { success: false, error: \"Name is required!\" };\n  }\n\n  const { data: installation } = await client\n    .from(\"github_installations\")\n    .select(\"*\")\n    .eq(\"installed_by\", user.id)\n    .single();\n\n  if (!installation) {\n    // No GitHub App installation - prompt user to install\n    return {\n      success: false,\n      error: \"Installation Needed\",\n    };\n  }\n\n  //parse url for owner and repo\n  const { owner, repo: repoName } = parseGitHubUrl(url);\n\n  const hasAccess = await verifyGithubRepoAccess(\n    installation.installation_id,\n    owner,\n    repoName,\n  );\n\n  if (!hasAccess) {\n    return {\n      success: false,\n      error: \"Access Denied\",\n    };\n  }\n\n  const { data: repo, error: repoError } = await client\n    .from(\"repositories\")\n    .insert({\n      name,\n      provider,\n      repo_url: url,\n      organization_id: orgId,\n      indexed_by: user.id,\n      index_status: \"not indexed\",\n    })\n    .select()\n    .single();\n\n  if (repoError) {\n    return { success: false, error: repoError.message };\n  }\n\n  return { success: true, data: repo as Repo };\n}\n\nexport async function createRepoViaGitlab(\n  formData: FormData,\n  orgId: string,\n): Promise<ActionResult<Repo | undefined>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const name = formData.get(\"name\") as string;\n  const provider = formData.get(\"type\") as string;\n  const url = formData.get(\"gitlab-url\") as string;\n\n  // Validate inputs\n  if (!name || name.trim() === \"\") {\n    return { success: false, error: \"Repository name is required\" };\n  }\n\n  if (!url || url.trim() === \"\") {\n    return { success: false, error: \"GitLab URL is required\" };\n  }\n\n  const { data: installation } = await client\n    .from(\"gitlab_installations\")\n    .select(\"*\")\n    .eq(\"installed_by\", user.id)\n    .single();\n\n  if (!installation) {\n    return { success: false, error: \"Installation Needed\" };\n  }\n\n  const { owner, repo: repoName } = parseGitLabUrl(url);\n\n  //verify access\n  const hasAccess = await verifyGitLabRepoAccess(\n    installation.access_token,\n    owner,\n    repoName,\n  );\n\n  if (!hasAccess) {\n    if (installation.access_token) {\n      return {\n        success: false,\n        error: \"Access required!\",\n      };\n    }\n\n    return {\n      success: false,\n      error: \"Access denied!\",\n    };\n  }\n\n  const { data: repo, error: repoError } = await client\n    .from(\"repositories\")\n    .insert({\n      name,\n      provider,\n      repo_url: url,\n      organization_id: orgId,\n      indexed_by: user.id,\n      index_status: \"not indexed\",\n    })\n    .select()\n    .single();\n\n  if (repoError) {\n    return { success: false, error: repoError.message };\n  }\n\n  return { success: true, data: repo };\n}\n\nexport async function createRepoViaLocalFile(\n  formData: FormData,\n  orgId: string,\n): Promise<ActionResult<Repo>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const name = formData.get(\"name\") as string;\n  const file = formData.get(\"file\") as File;\n\n  // Validate inputs\n  if (!name || name.trim() === \"\") {\n    return { success: false, error: \"Repository name is required\" };\n  }\n\n  if (!file) {\n    return { success: false, error: \"File is required\" };\n  }\n\n  // Validate file type\n  if (!file.name.endsWith(\".zip\")) {\n    return { success: false, error: \"Only .zip files are allowed\" };\n  }\n\n  // Validate file size (max 100MB)\n  const maxSize = 100 * 1024 * 1024; // 100MB in bytes\n  if (file.size > maxSize) {\n    return {\n      success: false,\n      error: \"File size exceeds 100MB limit\",\n    };\n  }\n\n  try {\n    // Generate a unique file name to prevent collisions\n    const timestamp = Date.now();\n    const sanitizedName = name.trim().replace(/[^a-z0-9-_]/gi, \"_\");\n    const fileName = `${sanitizedName}_${timestamp}_${file.name}`;\n    const filePath = `${orgId}/${fileName}`;\n\n    // Upload file to Supabase Storage\n    const { error: uploadError } = await client.storage\n      .from(\"local_repos\")\n      .upload(filePath, file, {\n        contentType: \"application/zip\",\n        upsert: false,\n      });\n\n    if (uploadError) {\n      console.error(\"Upload error:\", uploadError);\n      return {\n        success: false,\n        error: `File upload failed: ${uploadError.message}`,\n      };\n    }\n\n    // Get the public URL for the uploaded file\n    const { data: urlData } = client.storage\n      .from(\"local_repos\")\n      .getPublicUrl(filePath);\n\n    // Create repository record in database\n    const { data: repo, error: repoError } = await client\n      .from(\"repositories\")\n      .insert({\n        name: name.trim(),\n        provider: \"local\",\n        repo_url: null,\n        object_url: urlData.publicUrl,\n        organization_id: orgId,\n        indexed_by: user.id,\n        index_status: \"not indexed\",\n      })\n      .select()\n      .single();\n\n    if (repoError) {\n      console.error(\"Repository creation error:\", repoError);\n      // Attempt to clean up uploaded file\n      await client.storage.from(\"local_repos\").remove([filePath]);\n      return {\n        success: false,\n        error: `Repository creation failed: ${repoError.message}`,\n      };\n    }\n\n    return { success: true, data: repo as Repo };\n  } catch (error) {\n    console.error(\"Unexpected error:\", error);\n    return {\n      success: false,\n      error:\n        error instanceof Error ? error.message : \"An unexpected error occurred\",\n    };\n  }\n}\n\n// ============================================================================\n// Repository Management Services\n// ============================================================================\n\nexport async function getRepoWithStatus(\n  repoId: string,\n): Promise<ActionResult<Repo>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: repo, error } = await client\n    .from(\"repositories\")\n    .select(\"*\")\n    .eq(\"id\", repoId)\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  if (!repo) {\n    return { success: false, error: \"Repository not found\" };\n  }\n\n  return { success: true, data: repo as Repo };\n}\n\ntype UpdateData = {\n  name?: string;\n  repo_url?: string;\n  object_url?: string;\n  index_status?: string;\n};\n\nexport async function updateRepoSettings(\n  repoId: string,\n  settings: { name?: string; repo_url?: string; file?: File },\n): Promise<ActionResult<Repo>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // Get the current repo to check its provider type\n  const { data: currentRepo } = await client\n    .from(\"repositories\")\n    .select(\"*\")\n    .eq(\"id\", repoId)\n    .single();\n\n  if (!currentRepo) {\n    return { success: false, error: \"Repository not found!\" };\n  }\n\n  const updateData: UpdateData = {};\n\n  // Handle name update\n  if (settings.name) {\n    updateData.name = settings.name;\n  }\n\n  // Handle GitHub URL update\n  if (settings.repo_url && currentRepo.provider === \"github\") {\n    const { owner, repo } = parseGitHubUrl(settings.repo_url);\n\n    if (!owner || !repo) {\n      return { success: false, error: \"Invalid GitHub URL format!\" };\n    }\n\n    // Verify access to the new repo\n    const { data: installation } = await client\n      .from(\"github_installations\")\n      .select(\"*\")\n      .eq(\"installed_by\", user.id)\n      .single();\n\n    if (!installation) {\n      return { success: false, error: \"GitHub App not installed!\" };\n    }\n\n    const hasAccess = await verifyGithubRepoAccess(\n      installation.installation_id.toString(),\n      owner,\n      repo,\n    );\n\n    if (!hasAccess) {\n      return {\n        success: false,\n        error:\n          \"Cannot access this repository. Make sure the GitHub App is installed for this repository.\",\n      };\n    }\n\n    updateData.repo_url = settings.repo_url;\n    updateData.index_status = \"not indexed\"; // Trigger re-indexing\n  }\n\n  // Handle local file upload\n  if (settings.file && currentRepo.provider === \"local\") {\n    const file = settings.file;\n    const fileExt = file.name.split(\".\").pop();\n\n    if (fileExt !== \"zip\") {\n      return { success: false, error: \"Only .zip files are allowed!\" };\n    }\n\n    // Upload to Supabase Storage\n    const fileName = `${repoId}-${Date.now()}.zip`;\n    const { data: uploadData, error: uploadError } = await client.storage\n      .from(\"local_repos\")\n      .upload(fileName, file);\n\n    if (uploadError) {\n      console.error(uploadError);\n      return { success: false, error: \"Failed to upload file!\" };\n    }\n\n    // Get public URL\n    const { data: urlData } = client.storage\n      .from(\"local_repos\")\n      .getPublicUrl(fileName);\n\n    updateData.object_url = urlData.publicUrl;\n    updateData.index_status = \"pending\"; // Trigger re-indexing\n  }\n\n  // Update the repository\n  const { data: repo, error } = await client\n    .from(\"repositories\")\n    .update(updateData)\n    .eq(\"id\", repoId)\n    .select()\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: repo as Repo };\n}\n\nexport async function deleteRepo(\n  repoId: string,\n): Promise<ActionResult<{ organizationId: string }>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // Fetch the organization_id before deleting\n  const { data: repo, error: repoError } = await client\n    .from(\"repositories\")\n    .select(\"organization_id\")\n    .eq(\"id\", repoId)\n    .single();\n\n  if (repoError) {\n    console.error(repoError);\n    return { success: false, error: repoError.message };\n  }\n\n  if (!repo) {\n    return { success: false, error: \"Repository not found\" };\n  }\n\n  const { error } = await client.from(\"repositories\").delete().eq(\"id\", repoId);\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: { organizationId: repo.organization_id } };\n}\n\nexport async function triggerReindex(\n  repoId: string,\n): Promise<ActionResult<void>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // Update the index_status to 'pending' to trigger reindexing\n  const { error } = await client\n    .from(\"repositories\")\n    .update({ index_status: \"pending\" })\n    .eq(\"id\", repoId);\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  // TODO: Trigger actual indexing job/webhook/queue here\n  // This could be an API call to your indexing service\n\n  return { success: true, data: undefined };\n}\n\n// ============================================================================\n// Documentation Services\n// ============================================================================\n\nexport async function getDocumentation(\n  repoId: string,\n): Promise<ActionResult<Documentation>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: documentation, error } = await client\n    .from(\"documentation\")\n    .select(\"*\")\n    .eq(\"repo_id\", repoId)\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  if (!documentation) {\n    return { success: false, error: \"Documentation not found\" };\n  }\n\n  return { success: true, data: documentation as Documentation };\n}\n\nexport async function getDocPages(\n  repoId: string,\n): Promise<ActionResult<DocPage[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // Get the latest documentation version for this repo\n  const { data: documentation, error: docError } = await client\n    .from(\"documentation\")\n    .select(\"id\")\n    .eq(\"repo_id\", repoId)\n    .order(\"version\", { ascending: false })\n    .limit(1)\n    .single();\n\n  if (docError || !documentation) {\n    console.error(docError);\n    return { success: false, error: \"Documentation not found\" };\n  }\n\n  const { data: pages, error } = await client\n    .from(\"pages\")\n    .select(\"*\")\n    .eq(\"documentation_id\", documentation.id)\n    .order(\"order_index\", { ascending: true });\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (pages ?? []) as DocPage[] };\n}\n\nexport async function getDocPageById(\n  pageId: string,\n): Promise<ActionResult<DocPage>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: page, error } = await client\n    .from(\"doc_pages\")\n    .select(\"*\")\n    .eq(\"id\", pageId)\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  if (!page) {\n    return { success: false, error: \"Page not found\" };\n  }\n\n  return { success: true, data: page as DocPage };\n}\n\nexport async function getDocPagesHierarchical(\n  repoId: string,\n): Promise<ActionResult<DocPage[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // First get the documentation ID for this repo\n  const { data: documentation, error: docError } = await client\n    .from(\"documentation\")\n    .select(\"id\")\n    .eq(\"repo_id\", repoId)\n    .single();\n\n  if (docError || !documentation) {\n    console.error(docError);\n    return { success: false, error: \"Documentation not found\" };\n  }\n\n  const { data: pages, error } = await client\n    .from(\"doc_pages\")\n    .select(\"*\")\n    .eq(\"documentation_id\", documentation.id)\n    .order(\"order_index\", { ascending: true });\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  // Pages are already sorted by order_index\n  // The parent_page_id field maintains the hierarchy\n  // Frontend can use this to render the tree structure\n  return { success: true, data: (pages ?? []) as DocPage[] };\n}\n\n/**\n * Get all documentation versions for a repository\n */\nexport async function getDocumentationVersions(\n  repoId: string,\n): Promise<ActionResult<Documentation[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: versions, error } = await client\n    .from(\"documentation\")\n    .select(\"*\")\n    .eq(\"repo_id\", repoId)\n    .order(\"version\", { ascending: false });\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (versions ?? []) as Documentation[] };\n}\n\n/**\n * Get the latest completed documentation version for a repository\n */\nexport async function getLatestDocumentation(\n  repoId: string,\n): Promise<ActionResult<Documentation>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: documentation, error } = await client\n    .from(\"documentation\")\n    .select(\"*\")\n    .eq(\"repo_id\", repoId)\n    .order(\"version\", { ascending: false })\n    .limit(1)\n    .single();\n\n  if (!documentation) {\n    return { success: false, error: \"Documentation not found\" };\n  }\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: documentation as Documentation };\n}\n\n/**\n * Get documentation pages for a specific version\n */\nexport async function getDocPagesForVersion(\n  repoId: string,\n  version: number,\n): Promise<ActionResult<DocPage[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  // Get the documentation record for this version\n  const { data: documentation, error: docError } = await client\n    .from(\"documentation\")\n    .select(\"id\")\n    .eq(\"repo_id\", repoId)\n    .eq(\"version\", version)\n    .single();\n\n  if (docError || !documentation) {\n    return { success: false, error: \"Documentation version not found\" };\n  }\n\n  const { data: pages, error } = await client\n    .from(\"pages\")\n    .select(\"*\")\n    .eq(\"documentation_id\", documentation.id)\n    .order(\"order_index\", { ascending: true });\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (pages ?? []) as DocPage[] };\n}\n\n// ============================================================================\n// Conversation Services\n// ============================================================================\n\nexport async function getConversations(\n  repoId: string,\n  limit: number = 20,\n  version: number | null = null,\n): Promise<ActionResult<Conversation[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  let query = client\n    .from(\"conversations\")\n    .select(\"*\")\n    .eq(\"repo_id\", repoId)\n    .eq(\"user_id\", user.id);\n\n  // Filter by version if specified\n  if (version !== null && version !== undefined) {\n    query = query.eq(\"repo_version\", version);\n  }\n\n  const { data: conversations, error } = await query\n    .order(\"updated_at\", { ascending: false })\n    .limit(limit);\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (conversations ?? []) as Conversation[] };\n}\n\nexport async function getConversationById(\n  conversationId: string,\n): Promise<ActionResult<Conversation>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: conversation, error } = await client\n    .from(\"conversations\")\n    .select(\"*\")\n    .eq(\"id\", conversationId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  if (!conversation) {\n    return { success: false, error: \"Conversation not found\" };\n  }\n\n  return { success: true, data: conversation as Conversation };\n}\n\nexport async function createConversation(\n  repoId: string,\n  title?: string,\n  version?: number | null,\n): Promise<ActionResult<Conversation>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: conversation, error } = await client\n    .from(\"conversations\")\n    .insert({\n      repo_id: repoId,\n      user_id: user.id,\n      title: title || \"New Conversation\",\n      repo_version: version ?? null,\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: conversation as Conversation };\n}\n\nexport async function deleteConversation(\n  conversationId: string,\n): Promise<ActionResult<void>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { error } = await client\n    .from(\"conversations\")\n    .delete()\n    .eq(\"id\", conversationId)\n    .eq(\"user_id\", user.id);\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: undefined };\n}\n\nexport async function renameConversation(\n  conversationId: string,\n  newTitle: string,\n): Promise<ActionResult<Conversation>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: conversation, error } = await client\n    .from(\"conversations\")\n    .update({ title: newTitle })\n    .eq(\"id\", conversationId)\n    .eq(\"user_id\", user.id)\n    .select()\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: conversation as Conversation };\n}\n\n// ============================================================================\n// Message Services\n// ============================================================================\n\nexport async function getConversationMessages(\n  conversationId: string,\n): Promise<ActionResult<ConversationMessage[]>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: messages, error } = await client\n    .from(\"messages\")\n    .select(\"*\")\n    .eq(\"conversation_id\", conversationId)\n    .order(\"created_at\", { ascending: true });\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: (messages ?? []) as ConversationMessage[] };\n}\n\nexport async function createMessage(\n  conversationId: string,\n  role: \"user\" | \"assistant\",\n  content: string,\n): Promise<ActionResult<ConversationMessage>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: message, error } = await client\n    .from(\"messages\")\n    .insert({\n      conversation_id: conversationId,\n      role,\n      content,\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error(error);\n    return { success: false, error: error.message };\n  }\n\n  // Update the conversation's updated_at timestamp\n  await client\n    .from(\"conversations\")\n    .update({ updated_at: new Date().toISOString() })\n    .eq(\"id\", conversationId);\n\n  return { success: true, data: message as ConversationMessage };\n}\n\nexport async function saveCodeSnippets(\n  conversationId: string,\n  messageId: string,\n  snippets: Array<{ file: string; code: string }>,\n): Promise<ActionResult<CodeSnippet[]>> {\n  const supabase = await createClient();\n\n  const snippetsToInsert = snippets.map((snippet) => ({\n    conversation_id: conversationId,\n    message_id: messageId,\n    file_path: snippet.file,\n    code_content: snippet.code,\n    language: snippet.file.split(\".\").pop() || null,\n  }));\n\n  const { data, error } = await supabase\n    .from(\"code_snippets\")\n    .insert(snippetsToInsert)\n    .select();\n\n  if (error) {\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: data as CodeSnippet[] };\n}\n\nexport async function getCodeSnippetsForConversation(\n  conversationId: string,\n): Promise<ActionResult<CodeSnippet[]>> {\n  const supabase = await createClient();\n\n  const { data, error } = await supabase\n    .from(\"code_snippets\")\n    .select(\"*\")\n    .eq(\"conversation_id\", conversationId)\n    .order(\"created_at\", { ascending: false });\n\n  if (error) {\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: data as CodeSnippet[] };\n}\n\nexport async function deleteCodeSnippet(\n  snippetId: string,\n): Promise<ActionResult<null>> {\n  const supabase = await createClient();\n\n  const { error } = await supabase\n    .from(\"code_snippets\")\n    .delete()\n    .eq(\"id\", snippetId);\n\n  if (error) {\n    return { success: false, error: error.message };\n  }\n\n  return { success: true, data: null };\n}\n\nexport async function indexRepository(\n  repoId: string,\n): Promise<ActionResult<void>> {\n  const client = await createClient();\n\n  const {\n    data: { user },\n  } = await client.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  const { data: installation, error: installationError } = await client\n    .from(\"github_installations\")\n    .select(\"*\")\n    .eq(\"installed_by\", user.id)\n    .single();\n\n  if (!installation || installationError) {\n    return { success: false, error: \"Github App Installation not found!\" };\n  }\n\n  //fetch repo\n\n  const repoResult = await getRepoWithStatus(repoId);\n\n  if (!repoResult.success) {\n    return { success: false, error: repoResult.error };\n  }\n\n  const repoUrl = repoResult.data.repo_url;\n  const installationId = installation.installation_id;\n\n  // Get the latest version number for this repo\n  const { data: latestDoc } = await client\n    .from(\"documentation\")\n    .select(\"version\")\n    .eq(\"repo_id\", repoId)\n    .order(\"version\", { ascending: false })\n    .limit(1)\n    .single();\n\n  // Increment version (start at 1 if no previous versions)\n  const nextVersion = (latestDoc?.version ?? 0) + 1;\n\n  //mark the repository as indexing in supabase first\n  const { error: updateError } = await client\n    .from(\"repositories\")\n    .update({ index_status: \"indexing\" })\n    .eq(\"id\", repoId);\n\n  if (updateError) {\n    console.error(updateError);\n    return { success: false, error: updateError.message };\n  }\n\n  // Call the backend to start indexing (fire-and-forget)\n  // Don't await or throw errors since this is a long-running operation\n  fetch(`${process.env.BACKEND_URL}/repos/index`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      repo_url: repoUrl,\n      repo_id: repoId,\n      user_id: user.id,\n      installation_id: installationId,\n      branch: \"main\",\n      version: nextVersion,\n    }),\n  }).catch((error) => {\n    // Log the error but don't fail the request\n    console.error(\"Indexing request failed:\", error);\n    // The backend should handle updating the repo status on failure\n  });\n\n  // Return success immediately - the indexing will happen in the background\n  return { success: true, data: undefined };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file:///home/mann/CodeCompass_DEMO_FALL2025/codecompass/src/lib/services/orgService.ts"],"sourcesContent":["\"use server\";\n\nimport { createClient, createAdminClient } from \"@/utils/supabase/server\";\nimport {\n  Organization,\n  OrganizationWithRole,\n  OrganizationMember,\n} from \"@/app/types/supabase\";\nimport { ActionResult } from \"@/app/types/action\";\n\nexport async function getOrgs(): Promise<ActionResult<OrganizationWithRole[]>> {\n  const supabase = await createClient();\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not found\" };\n  }\n\n  // Query from user_organizations table to properly filter by user_id\n  const { data: userOrgs, error: organizationsError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"role,joined_at,organizations(id,name,created_at)\")\n    .eq(\"user_id\", user.id);\n\n  if (organizationsError) {\n    return { success: false, error: organizationsError.message };\n  }\n\n  // Transform the data to match OrganizationWithRole structure\n  const organizations: OrganizationWithRole[] = (userOrgs ?? []).map((uo) => {\n    const org = uo.organizations as Organization | Organization[];\n    // Handle case where organizations might be an array (shouldn't happen with proper FK)\n    const orgData = Array.isArray(org) ? org[0] : org;\n\n    return {\n      id: orgData.id,\n      name: orgData.name,\n      created_at: orgData.created_at,\n      role: uo.role,\n      joined_at: uo.joined_at,\n    };\n  });\n\n  return {\n    success: true,\n    data: organizations,\n  };\n}\n\nexport async function getOrgById(\n  orgId: string,\n): Promise<ActionResult<Organization>> {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not found\" };\n  }\n\n  const { data: organization, error } = await supabase\n    .from(\"organizations\")\n    .select(\"id,name,created_at\")\n    .eq(\"id\", orgId)\n    .single();\n\n  if (error) {\n    return { success: false, error: error.message };\n  }\n\n  if (!organization) {\n    return { success: false, error: \"Organization not found\" };\n  }\n\n  return { success: true, data: organization };\n}\n\nexport async function getOrgMembers(\n  orgId: string,\n): Promise<ActionResult<OrganizationMember[]>> {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated\" };\n  }\n\n  // Verify user has access to this organization\n  const { data: userOrg, error: accessError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"organization_id\")\n    .eq(\"organization_id\", orgId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (accessError || !userOrg) {\n    return { success: false, error: \"Access denied to this organization\" };\n  }\n\n  // Fetch all members of the organization with their user details\n  // Join with users table to get email addresses\n  const { data: members, error: membersError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"user_id, organization_id, role, joined_at, users(email)\")\n    .eq(\"organization_id\", orgId)\n    .order(\"joined_at\", { ascending: true });\n\n  if (membersError) {\n    return { success: false, error: membersError.message };\n  }\n\n  if (!members || members.length === 0) {\n    return { success: true, data: [] };\n  }\n\n  // Transform the joined data to match OrganizationMember type\n  const membersWithEmails: OrganizationMember[] = members.map((m) => {\n    // Handle the users field which could be an object or array due to the join\n    const userData = m.users as { email: string } | { email: string }[] | null;\n    const email = Array.isArray(userData)\n      ? userData[0]?.email || \"Unknown\"\n      : userData?.email || \"Unknown\";\n\n    return {\n      user_id: m.user_id,\n      organization_id: m.organization_id,\n      role: m.role as \"owner\" | \"teammate\",\n      joined_at: m.joined_at,\n      user_email: email,\n    };\n  });\n\n  return { success: true, data: membersWithEmails };\n}\n\nexport async function createOrg(\n  formData: FormData,\n): Promise<ActionResult<Organization>> {\n  const supabase = await createClient();\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not found\" };\n  }\n\n  const name = formData.get(\"name\") as string;\n\n  if (!name || name.trim() === \"\") {\n    return { success: false, error: \"Organization name is required\" };\n  }\n\n  const { data: organization, error: organizationError } = await supabase\n    .from(\"organizations\")\n    .insert({\n      name: name.trim(),\n    })\n    .select()\n    .single();\n\n  if (organizationError) {\n    return { success: false, error: organizationError.message };\n  }\n\n  const { error: userOrganizationError } = await supabase\n    .from(\"user_organizations\")\n    .insert({\n      user_id: user.id,\n      organization_id: organization.id,\n      role: \"owner\",\n    })\n    .select()\n    .single();\n\n  if (userOrganizationError) {\n    return { success: false, error: userOrganizationError.message };\n  }\n\n  return { success: true, data: organization };\n}\n\nexport async function createInviteLink(\n  organizationId: string,\n): Promise<ActionResult<{ token: string; expiresAt: string }>> {\n  const supabase = await createClient();\n\n  //authenticate user\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated!\" };\n  }\n\n  //check membership\n  const { data: userOrg, error: accessError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"organization_id, role\")\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (accessError || !userOrg) {\n    return {\n      success: false,\n      error: \"User does not have access to this organization!\",\n    };\n  }\n\n  //generate a secure token\n\n  const token = crypto.randomUUID();\n\n  //calculate expiry date\n  const expiresAt = new Date();\n  expiresAt.setDate(expiresAt.getDate() + 7);\n\n  //store the invite in supa\n\n  const { error: inviteError } = await supabase\n    .from(\"organization_invites\")\n    .insert({\n      organization_id: organizationId,\n      created_by: user.id,\n      token,\n      expires_at: expiresAt.toISOString(),\n    });\n\n  if (inviteError) {\n    console.error(\"Failed to create invite:\", inviteError);\n    return { success: false, error: \"Failed to create invite link\" };\n  }\n\n  return {\n    success: true,\n    data: {\n      token,\n      expiresAt: expiresAt.toISOString(),\n    },\n  };\n}\n\nexport async function acceptInvite(\n  token: string,\n): Promise<ActionResult<{ organizationId: string }>> {\n  const supabase = await createClient();\n\n  // 1. Authenticate user\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return {\n      success: false,\n      error: \"You must be logged in to accept an invite\",\n    };\n  }\n\n  // 2. Fetch and validate invite (with locking to prevent race conditions)\n  const { data: invite, error: inviteError } = await supabase\n    .from(\"organization_invites\")\n    .select(\"*\")\n    .eq(\"token\", token)\n    .is(\"used_at\", null) // Only get unused invites\n    .single();\n\n  if (inviteError || !invite) {\n    return { success: false, error: \"Invalid or expired invite link\" };\n  }\n\n  // 3. Check expiration\n  const now = new Date();\n  const expiresAt = new Date(invite.expires_at);\n  if (now > expiresAt) {\n    return { success: false, error: \"This invite has expired\" };\n  }\n\n  // 4. Check if user is already a member\n  const { data: existingMembership } = await supabase\n    .from(\"user_organizations\")\n    .select(\"organization_id\")\n    .eq(\"organization_id\", invite.organization_id)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (existingMembership) {\n    return {\n      success: false,\n      error: \"You are already a member of this organization\",\n    };\n  }\n\n  // 5. Add user to organization\n  const { error: membershipError } = await supabase\n    .from(\"user_organizations\")\n    .insert({\n      user_id: user.id,\n      organization_id: invite.organization_id,\n      role: \"teammate\", // Default role for invited users\n    });\n\n  if (membershipError) {\n    console.error(\"Failed to add user to organization:\", membershipError);\n    return { success: false, error: \"Failed to join organization\" };\n  }\n\n  // 6. Mark invite as used (using admin client with secret key to bypass RLS)\n  const adminClient = createAdminClient();\n  const { error: updateError } = await adminClient\n    .from(\"organization_invites\")\n    .update({\n      used_at: new Date().toISOString(),\n      used_by: user.id,\n    })\n    .eq(\"token\", token);\n\n  if (updateError) {\n    console.error(\"Failed to mark invite as used:\", updateError);\n    // Don't return error - user was already added successfully\n  }\n\n  return {\n    success: true,\n    data: { organizationId: invite.organization_id },\n  };\n}\n\nexport async function removeMemberFromOrg(\n  organizationId: string,\n  userIdToRemove: string,\n): Promise<ActionResult<void>> {\n  const supabase = await createClient();\n\n  // 1. Authenticate user\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated\" };\n  }\n\n  // 2. Verify current user is an owner (RLS will also enforce this)\n  const { data: currentUserRole, error: roleError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"role\")\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (roleError || !currentUserRole || currentUserRole.role !== \"owner\") {\n    return {\n      success: false,\n      error: \"Only organization owners can remove members\",\n    };\n  }\n\n  // 3. Check if the user being removed is the last owner\n  if (userIdToRemove === user.id) {\n    const { data: owners, error: ownersError } = await supabase\n      .from(\"user_organizations\")\n      .select(\"user_id\")\n      .eq(\"organization_id\", organizationId)\n      .eq(\"role\", \"owner\");\n\n    if (ownersError) {\n      return { success: false, error: \"Failed to verify ownership status\" };\n    }\n\n    if (owners && owners.length <= 1) {\n      return {\n        success: false,\n        error: \"Cannot remove the last owner from the organization\",\n      };\n    }\n  }\n\n  // 4. Remove the member (RLS policy will enforce owner permission)\n  const { error: deleteError } = await supabase\n    .from(\"user_organizations\")\n    .delete()\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", userIdToRemove);\n\n  if (deleteError) {\n    return { success: false, error: \"Failed to remove member\" };\n  }\n\n  return { success: true, data: undefined };\n}\n\nexport async function leaveOrganization(\n  organizationId: string,\n): Promise<ActionResult<void>> {\n  const supabase = await createClient();\n\n  // 1. Authenticate user\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated\" };\n  }\n\n  // 2. Verify user is a member of this organization\n  const { data: membership, error: membershipError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"role\")\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (membershipError || !membership) {\n    return {\n      success: false,\n      error: \"You are not a member of this organization\",\n    };\n  }\n\n  // 3. If user is an owner, check if they're the last owner\n  if (membership.role === \"owner\") {\n    const { data: owners, error: ownersError } = await supabase\n      .from(\"user_organizations\")\n      .select(\"user_id\")\n      .eq(\"organization_id\", organizationId)\n      .eq(\"role\", \"owner\");\n\n    if (ownersError) {\n      return { success: false, error: \"Failed to verify ownership status\" };\n    }\n\n    if (owners && owners.length <= 1) {\n      return {\n        success: false,\n        error: \"Cannot leave as the last owner. Transfer ownership first.\",\n      };\n    }\n  }\n\n  // 4. Remove the user from the organization\n  const { error: deleteError } = await supabase\n    .from(\"user_organizations\")\n    .delete()\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", user.id);\n\n  if (deleteError) {\n    return { success: false, error: \"Failed to leave organization\" };\n  }\n\n  return { success: true, data: undefined };\n}\n\nexport async function updateMemberRole(\n  organizationId: string,\n  userIdToUpdate: string,\n  newRole: \"owner\" | \"teammate\",\n): Promise<ActionResult<void>> {\n  const supabase = await createClient();\n\n  // 1. Authenticate user\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  if (!user) {\n    return { success: false, error: \"User not authenticated\" };\n  }\n\n  // 2. Verify current user is an owner\n  const { data: currentUserRole, error: roleError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"role\")\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", user.id)\n    .single();\n\n  if (roleError || !currentUserRole || currentUserRole.role !== \"owner\") {\n    return {\n      success: false,\n      error: \"Only organization owners can change member roles\",\n    };\n  }\n\n  // 3. Get current role of user being updated\n  const { data: targetUser, error: targetError } = await supabase\n    .from(\"user_organizations\")\n    .select(\"role\")\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", userIdToUpdate)\n    .single();\n\n  if (targetError || !targetUser) {\n    return { success: false, error: \"Member not found\" };\n  }\n\n  // 4. If demoting from owner to teammate, check if they're the last owner\n  if (targetUser.role === \"owner\" && newRole === \"teammate\") {\n    const { data: owners, error: ownersError } = await supabase\n      .from(\"user_organizations\")\n      .select(\"user_id\")\n      .eq(\"organization_id\", organizationId)\n      .eq(\"role\", \"owner\");\n\n    if (ownersError) {\n      return { success: false, error: \"Failed to verify ownership status\" };\n    }\n\n    if (owners && owners.length <= 1) {\n      return {\n        success: false,\n        error: \"Cannot demote the last owner. Promote another member first.\",\n      };\n    }\n  }\n\n  // 5. Update the role\n  const { error: updateError } = await supabase\n    .from(\"user_organizations\")\n    .update({ role: newRole })\n    .eq(\"organization_id\", organizationId)\n    .eq(\"user_id\", userIdToUpdate);\n\n  if (updateError) {\n    return { success: false, error: \"Failed to update member role\" };\n  }\n\n  return { success: true, data: undefined };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1839, "column": 0}, "map": {"version":3,"sources":["file:///home/mann/CodeCompass_DEMO_FALL2025/codecompass/.next-internal/server/app/dashboard/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getConversations as '7086746f18569372ffa3cfdffc9aa12e4d2f9a0dec'} from 'ACTIONS_MODULE0'\nexport {createOrg as '40daa9c9a31e4b9e3f17ba924ae68919c41650a3af'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA"}}]
}